# æ·±æ‹·è´ï½œæµ…æ‹·è´

------

### ==é¢è¯•è¿‡ç¨‹ä¸­é«˜é¢‘é—®é¢˜==

è°ˆåˆ°æ·±æ‹·è´ï¼Œæµ…æ‹·è´å°±è¦å…ˆè€ƒè™‘JSæ•°æ®åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹

åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ—¶å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­çš„ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ˜¯åœ¨æ ˆå†…å­˜ä¸­å­˜æ”¾äº†ä¸€ä¸ªå¼•ç”¨ï¼Œå®é™…çš„æ•°æ®åœ¨å †å†…å­˜ä¸­ã€‚

##æµ…æ‹·è´

#### åŸºæœ¬æ•°æ®ç±»å‹

```js
// åŸºæœ¬æ•°æ®ç±»å‹
var  a=1
var  b=a
b=2
console.log(a)//1
console.log(b)//2
```

å°†açš„å€¼èµ‹äºˆå˜é‡bï¼Œç„¶åä¿®æ”¹å˜é‡bï¼Œæœ€åç»“æœbçš„å€¼æ”¹å˜ï¼Œè€Œaçš„å€¼ä¸æ”¹å˜ã€‚

#### å¼•ç”¨æ•°æ®ç±»å‹

```js
// å¼•ç”¨æ•°æ®ç±»å‹
var dict1 = {
  a: 1,
  b: 2
}
var dict2 = dict1
dict2.a = 3
console.log(dict1.a) //3
console.log(dict2.a) //3
```

å¼•ç”¨æ•°æ®ç±»å‹å°±ä¼šçœ‹åˆ°ä¸åŒï¼Œæˆ‘ä»¬åªæ˜¯å°†dict1çš„æ ˆå†…å­˜ä¸­çš„å¼•ç”¨èµ‹å€¼ç»™äº†dict2ï¼Œè€Œå®ƒä»¬å®é™…æŒ‡å‘çš„å€¼å´æ˜¯åŒä¸€ä¸ªæ•°æ®ã€‚

##### ä»¥ä¸ŠğŸŒ°æ¥çœ‹ï¼Œæµ…æ‹·è´æ˜¯åªæ‹·è´äº†å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ·±å±‚æ¬¡çš„æ‹·è´å¯¹è±¡çš„å€¼ï¼Œå¤šä¸ªå¯¹è±¡åªæƒ³åŒä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œæœ‰ä»»ä½•ä¸€ä¸ªä¿®æ”¹ï¼Œéƒ½ä¼šä½¿æ‰€æœ‰å¯¹è±¡çš„å€¼å‘ç”Ÿå˜åŒ–ã€‚

## æ·±æ‹·è´

æ·±æ‹·è´ä¸»è¦ä½œç”¨äºå¼•ç”¨ç±»å‹ä¸Šï¼Œå¦‚ï¼šObjectï¼ŒArrayï¼Œæ·±æ‹·è´ä¸ä¼šæ‹·è´å¼•ç”¨ï¼Œè€Œæ˜¯å°†å¼•ç”¨ç±»å‹çš„å€¼æ‹·è´ä¸€ä»½ï¼Œç„¶åç”Ÿæˆæ–°çš„å¼•ç”¨ç±»å‹ã€‚

#### æ·±æ‹·è´çš„å®ç°

##### 1.JSON.stringfy()å’ŒJSON.parse()

```js
var dict1 = {
  a: 1,
  b: 2
}
var dict2 = JSON.parse(JSON.stringify(dict1));
dict2.a = 3;
console.log(dict1.a); // 1
console.log(dict2.a); // 3
```

##### å€¼å¾—æ³¨æ„çš„æ˜¯æ­¤æ–¹æ³•ä¸èƒ½å®ç°æ‹·è´undefinedã€functionã€RegExpç­‰ç±»å‹ï¼›å¹¶ä¸”ä¼šä¸¢å¤±åŸå‹ã€ä¼šç›´æ¥æŒ‡å‘Objectï¼›å¾ªç¯å¼•ç”¨ä¼šæŠ¥é”™ï¼›

#### 2.isTypeå’ŒObject.prototype.toString.call(obj)è¿›è¡Œç±»å‹åˆ¤æ–­

- hasCloneå­˜å‚¨å·²ç»åˆ›å»ºçš„åœ°å€ï¼Œé¿å…å¾ªç¯ï¼›
- ä½¿ç”¨é€’å½’è¿›è¡Œå±‚å±‚æ‹·è´ï¼›

```js
// æ›´å…¨é¢çš„æ·±æ‹·è´å®ç°
const isType = (obj, type) => {
  if (typeof obj !== 'object') return false
  const typeString = Object.prototype.toString.call(obj)
  let flag
  switch (type) {
    case 'Array':
      flag = typeString === '[object Array]'
      break
    case 'Set':
      flag = typeString === '[object Set]'
      break
    case 'Map':
      flag = typeString === '[object Map]'
      break
    default:
      flag = false
  }
  return flag
}
const deepClone = parent => {
  const hasClone = new Set()
  const _deepClone = parent => {
    if (parent === null) return null
    if (hasClone.has(parent)) {
      return parent
    }
    if (typeof parent !== 'object') return parent
    let child
    hasClone.add(parent)
    if (isType(parent, 'Array')) {
      child = []
      for (const iterator of parent) {
        child.push(_deepClone(iterator))
      }
    } else if (isType(parent, 'Map')) {
      child = new Map()
      for (const [key, value] of parent) {
        child.set(key, _deepClone(value))
      }
    } else if (isType(parent, 'Set')) {
      child = new Set()
      for (const iterator of parent) {
        child.add(_deepClone(iterator))
      }
    } else {
      proto = Object.getPrototypeOf(parent)
      child = Object.create(proto)
      for (const key in parent) {
        child[key] = _deepClone(parent[key])
      }
    }
    return child
  }
  return _deepClone(parent)
}
var arr1 = [1,2]
var arr2 = deepClone(arr1)
arr2[1] = 3 
console.log(arr1)//[1,2]
console.log(arr2)//[1,3]
```

### å‚è€ƒæ–‡ç« ï¼š

> æ˜é‡‘æ–‡ç« ï¼šhttps://juejin.cn/post/6994981703471087624#heading-6
>
> github-å¥½å‹çš„blogï¼šhttps://github.com/YBFACC/blog/issues/32#issue-663186040

